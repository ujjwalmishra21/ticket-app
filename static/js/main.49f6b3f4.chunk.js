(this["webpackJsonpticket-app"]=this["webpackJsonpticket-app"]||[]).push([[4],{1:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"B",(function(){return u})),n.d(t,"C",(function(){return c})),n.d(t,"A",(function(){return i})),n.d(t,"x",(function(){return s})),n.d(t,"y",(function(){return l})),n.d(t,"w",(function(){return d})),n.d(t,"i",(function(){return f})),n.d(t,"j",(function(){return m})),n.d(t,"d",(function(){return p})),n.d(t,"h",(function(){return g})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return b})),n.d(t,"e",(function(){return v})),n.d(t,"u",(function(){return S})),n.d(t,"v",(function(){return O})),n.d(t,"t",(function(){return E})),n.d(t,"z",(function(){return _})),n.d(t,"l",(function(){return y})),n.d(t,"m",(function(){return T})),n.d(t,"k",(function(){return j})),n.d(t,"o",(function(){return C})),n.d(t,"p",(function(){return A})),n.d(t,"n",(function(){return I})),n.d(t,"r",(function(){return k})),n.d(t,"s",(function(){return w})),n.d(t,"q",(function(){return L}));var r="ADD_STORE_START",a="ADD_STORE_SUCCESS",o="ADD_STORE_FAIL",u="SIGNUP_START",c="SIGNUP_SUCCESS",i="SIGNUP_FAIL",s="FETCH_STORES_START",l="FETCH_STORES_SUCCESS",d="FETCH_STORES_FAIL",f="AUTH_START",m="AUTH_SUCCESS",p="AUTH_FAIL",g="AUTH_LOGOUT",h="AUTH_INIT_START",b="AUTH_INIT_SUCCESS",v="AUTH_INIT_FAIL",S="FETCH_SLOTS_START",O="FETCH_SLOTS_SUCCESS",E="FETCH_SLOTS_FAIL",_="SET_AUTH_REDIRECT_PATH",y="CREATE_BOOKING_START",T="CREATE_BOOKING_SUCCESS",j="CREATE_BOOKING_FAIL",C="FETCH_BOOKING_START",A="FETCH_BOOKING_SUCCESS",I="FETCH_BOOKIN_FAIL",k="FETCH_LOCATION",w="FETCH_LOCATION_SUCCESS",L="FETCH_LOCATION_FAIL"},197:function(e,t,n){e.exports=n(316)},2:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var r=n(91),a=function(e,t){return Object(r.a)(Object(r.a)({},e),t)},o=function(e,t){var n=!0;if(!t)return!0;if(t.required&&(n=""!==e.trim()&&n),t.minLength&&(n=e.length>=t.minLength&&n),t.maxLength&&(n=e.length<=t.maxLength&&n),t.isEmail){n=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e)&&n}if(t.isNumeric){n=/^\d+$/.test(e)&&n}return n}},208:function(e,t,n){},209:function(e,t,n){},210:function(e,t,n){},294:function(e,t,n){},316:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(32),u=n.n(o),c=n(46),i=n(34),s=n(31),l=n(144),d=(n(206),n(207),n(208),n(35)),f=n(36),m=n(38),p=n(37),g=n(9),h=(n(209),function(e){return function(t){Object(m.a)(r,t);var n=Object(p.a)(r);function r(){var e;Object(d.a)(this,r);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=n.call.apply(n,[this].concat(a))).state={component:null},e}return Object(f.a)(r,[{key:"componentDidMount",value:function(){var t=this;e().then((function(e){t.setState({component:e.default})}))}},{key:"render",value:function(){var e=this.state.component;return e?a.a.createElement(e,this.props):null}}]),r}(r.Component)}),b=n(325),v=n(326),S=n(324),O=n(319),E=n(68),_=(n(210),function(e){return a.a.createElement(S.a.Item,{name:e.name,active:e.activeItem===e.name,onClick:e.clicked,className:"navitem"},e.name)}),y=(n(294),function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={activeItem:"home",visible:!1},e.handleItemClick=function(t,n){var r=n.name;return e.setState({activeItem:r})},e.toggleVisibility=function(){return e.setState({visible:!e.state.visible})},e}return Object(f.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.activeItem,r=t.visible,o=a.a.createElement(b.a.Pushable,{as:v.a},a.a.createElement(b.a,{as:S.a,animation:"overlay",icon:"labeled",inverted:!0,onHide:this.toggleVisibility,vertical:!0,visible:r,width:"thin"},this.props.navList.map((function(t){return a.a.createElement(s.b,{to:t.path},a.a.createElement(_,{name:t.name,activeItem:n,clicked:e.handleItemClick}))}))),a.a.createElement(b.a.Pusher,{dimmed:r},a.a.createElement(v.a,{basic:!0},a.a.createElement("div",{className:"navbar-section"},a.a.createElement("div",{className:"navbar-button",onClick:this.toggleVisibility},a.a.createElement(O.a,{name:"sidebar",size:"big"})),a.a.createElement("div",{className:"logo-navbar"},a.a.createElement(s.b,{to:"/"},a.a.createElement("h2",null,"SPOTBook")))),this.props.children)));return a.a.createElement(E.a,null,o)}}]),n}(r.Component)),T=n(93),j=h((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(9)]).then(n.bind(null,592))})),C=h((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(10)]).then(n.bind(null,594))})),A=h((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(14)]).then(n.bind(null,595))})),I=h((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(11)]).then(n.bind(null,596))})),k=h((function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(7),n.e(12)]).then(n.bind(null,604))})),w=h((function(){return Promise.all([n.e(0),n.e(8),n.e(15)]).then(n.bind(null,602))})),L=h((function(){return Promise.all([n.e(0),n.e(13)]).then(n.bind(null,597))})),x=h((function(){return n.e(16).then(n.bind(null,598))})),H=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.props.onTryAutoLogin()}},{key:"render",value:function(){var e=[{name:"Login",path:"/login"},{name:"Signup",path:"/signup"}],t=a.a.createElement(g.d,null,a.a.createElement(g.b,{path:"/otp",component:A}),a.a.createElement(g.b,{path:"/signup",component:j}),a.a.createElement(g.b,{path:"/login",component:C}),a.a.createElement(g.a,{to:"/"}));if(this.props.isAuthenticated){var n=null;1===parseInt(this.props.userData.type)?(e=[{name:"Home",path:"/"},{name:"Add Store",path:"/addStore"},{name:"Get Store",path:"/getStore"},{name:"My Bookings",path:"/myBookings"},{name:"Logout",path:"/logout"}],n=a.a.createElement(g.b,{path:"/addStore",component:I})):e=[{name:"Home",path:"/"},{name:"Get Store",path:"/getStore"},{name:"My Bookings",path:"/myBookings"},{name:"Logout",path:"/logout"}],t=a.a.createElement(g.d,null,n,a.a.createElement(g.b,{path:"/getStore",component:k}),a.a.createElement(g.b,{path:"/myBookings",component:w}),a.a.createElement(g.b,{path:"/logout",component:x}),a.a.createElement(g.b,{path:"/",exact:!0,component:L}),a.a.createElement(g.a,{to:"/"}))}return a.a.createElement("div",{className:"App"},a.a.createElement(y,{navList:e},a.a.createElement("header",{className:"App-header"},t)))}}]),n}(r.Component),N=Object(g.g)(Object(c.b)((function(e){return{isAuthenticated:null!==e.auth.token,userData:e.auth.data}}),(function(e){return{onTryAutoLogin:function(){return e(T.c())}}}))(H));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var R=n(1),D=n(2),U={stores:[],loading:!1,error:null,response:null},F=function(e,t){return Object(D.b)(e,{error:null,loading:!0})},B=function(e,t){return Object(D.b)(e,{loading:!1,response:t.response})},P=function(e,t){return Object(D.b)(e,{loading:!1,error:t.error})},z=function(e,t){return Object(D.b)(e,{error:null,loading:!0})},G=function(e,t){return Object(D.b)(e,{stores:t.stores,loading:!1})},J=function(e,t){return Object(D.b)(e,{loading:!1,error:t.error})},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.x:return z(e);case R.y:return G(e,t);case R.w:return J(e,t);case R.b:return F(e);case R.c:return B(e,t);case R.a:return P(e,t);default:return e}},M={token:null,data:null,error:null,loading:!1,mobile_number:null,authRedirectPath:"/"},q=function(e,t){return Object(D.b)(e,{error:null,loading:!0})},V=function(e,t){return Object(D.b)(e,{loading:!1})},$=function(e,t){return Object(D.b)(e,{error:t.error,loading:!1})},W=function(e,t){return Object(D.b)(e,{error:null,loading:!0})},Y=function(e,t){return Object(D.b)(e,{error:null,loading:!1,mobile_number:t.mobile_number})},Z=function(e,t){return Object(D.b)(e,{error:t.error,loading:!1})},Q=function(e,t){return Object(D.b)(e,{error:null,loading:!0})},X=function(e,t){return Object(D.b)(e,{error:null,token:t.token,data:t.data,loading:!1})},ee=function(e,t){return Object(D.b)(e,{error:t.error,loading:!1})},te=function(e,t){return Object(D.b)(e,{token:null,data:null})},ne=function(e,t){return Object(D.b)(e,{authRedirectPath:t.path})},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.B:return q(e);case R.C:return V(e);case R.A:return $(e,t);case R.f:return W(e);case R.g:return Y(e,t);case R.e:return Z(e,t);case R.i:return Q(e);case R.j:return X(e,t);case R.d:return ee(e,t);case R.h:return te(e);case R.z:return ne(e,t);default:return e}},ae={slots:[],loading:!1},oe=function(e,t){return Object(D.b)(e,{loading:!0})},ue=function(e,t){return Object(D.b)(e,{slots:t.slots,loading:!1})},ce=function(e,t){return Object(D.b)(e,{loading:!1})},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.u:return oe(e);case R.v:return ue(e,t);case R.w:return ce(e);default:return e}},se={message:null,loading:!1,error:null,booking:null},le=function(e,t){return Object(D.b)(e,{loading:!0})},de=function(e,t){return Object(D.b)(e,{message:t.message,loading:!1})},fe=function(e,t){return Object(D.b)(e,{loading:!1,error:t.error})},me=function(e,t){return Object(D.b)(e,{loading:!0})},pe=function(e,t){return Object(D.b)(e,{loading:!1,booking:t.booking})},ge=function(e,t){return Object(D.b)(e,{loading:!1,error:t.error})},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.l:return le(e);case R.m:return de(e,t);case R.k:return fe(e,t);case R.o:return me(e);case R.p:return pe(e,t);case R.n:return ge(e,t);default:return e}},be={loading:!1,error:null,location_data:null},ve=function(e,t){return Object(D.b)(e,{loading:!0})},Se=function(e,t){return Object(D.b)(e,{loading:!1,location_data:t.location_data})},Oe=function(e,t){return Object(D.b)(e,{loading:!1,error:t.error})},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.r:return ve(e);case R.s:return Se(e,t);case R.q:return Oe(e,t);default:return e}},_e=i.d,ye=Object(i.c)({store:K,auth:re,slot:ie,booking:he,location:Ee}),Te=Object(i.e)(ye,_e(Object(i.a)(l.a))),je=a.a.createElement(c.a,{store:Te},a.a.createElement(s.a,null,a.a.createElement(N,null)));u.a.render(je,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},68:function(e,t,n){"use strict";t.a=function(e){return e.children}},93:function(e,t,n){"use strict";n.d(t,"i",(function(){return f})),n.d(t,"a",(function(){return l})),n.d(t,"l",(function(){return p})),n.d(t,"d",(function(){return h})),n.d(t,"b",(function(){return E})),n.d(t,"j",(function(){return S})),n.d(t,"k",(function(){return _})),n.d(t,"c",(function(){return y})),n.d(t,"h",(function(){return j})),n.d(t,"e",(function(){return A})),n.d(t,"f",(function(){return k})),n.d(t,"g",(function(){return w}));var r=n(44),a=n.n(r),o=n(67),u=n(1),c=n(150),i=n.n(c).a.create({baseURL:"https://spotbook101.herokuapp.com/"}),s=function(e){return{type:u.a,error:e}},l=function(e,t){return function(n){n({type:u.b}),console.log(e+"---"+JSON.stringify(t));var r={headers:{"x-auth":e}};i.post("/addStore",t,r).then((function(e){"success"===e.data.status?n(function(e){return{type:u.c,response:e}}(e.data)):n(s(e.data.message))})).catch((function(e){n(s(e.message))}))}},d=function(e){return{type:u.w,error:e}},f=function(e,t){return function(){var n=Object(o.a)(a.a.mark((function n(r){var o,c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r({type:u.x}),console.log("------"+t),o="",t.owner_id?o="?owner_id=".concat(t.owner_id):t.zip?o="?zip=".concat(t.zip):t.city&&(o="?city=".concat(t.city)),c={headers:{"x-auth":e}},i.get("/getStores"+o,c).then((function(e){if("success"===e.data.status){var t=[];e.data.data.forEach((function(e){t.push(e)})),r((n=t,{type:u.y,stores:n}))}else r(d(e.data.message));var n})).catch((function(e){console.log(e),r(d(e.message))}));case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},m=function(e){return{type:u.A,error:e}},p=function(e){return function(t){t({type:u.B}),i.post("/signup",e).then((function(e){"success"===e.data.status?t({type:u.C}):t(m(e.data.message))})).catch((function(e){t(m(e.message))}))}},g=function(e){return{type:u.e,error:e}},h=function(e){return function(t){t({type:u.f});var n={mobile_number:e};i.post("/login",n).then((function(n){"success"===n.data.status?t(function(e){return{type:u.g,mobile_number:e}}(e)):t(g(n.data.message))})).catch((function(e){t(g(e))}))}},b=function(e,t){return{type:u.j,token:e,data:t}},v=function(e){return{type:u.d,error:e}},S=function(){return localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),localStorage.removeItem("data"),{type:u.h}},O=function(e){return function(t){setTimeout((function(){t(S())}),1e5*e)}},E=function(e,t){return function(n){n({type:u.i});var r={mobile_number:e,otp:t};i.post("/login/verify-otp",r).then((function(e){if("success"===e.data.status){var t=new Date((new Date).getTime()+36e5),r={"x-auth":e.headers["x-auth"],expirationDate:t};localStorage.setItem("token",r["x-auth"]),localStorage.setItem("expirationDate",r.expirationDate),localStorage.setItem("data",JSON.stringify(e.data.data)),n(b(r["x-auth"],e.data.data)),n(O(3600))}else n(v(e.data.message))})).catch((function(e){n(v(e.message))}))}},_=function(e){return{type:u.z,path:e}},y=function(){return function(e){var t=localStorage.getItem("token");if(t){var n=new Date(localStorage.getItem("expirationDate")),r=localStorage.getItem("data");n<=new Date?e(S()):(e(b(t,JSON.parse(r))),e(O((n.getTime()-(new Date).getTime())/1e3)))}else e(S())}},T=function(e){return{type:u.t,error:e}},j=function(e){return function(){var t=Object(o.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:u.u}),r={headers:{"x-auth":e}},i.get("/getSlots",r).then((function(e){if("success"==e.data.status){var t=[];e.data.data.forEach((function(e){t.push(e)})),n((r=t,{type:u.v,slots:r}))}else n(T(e.data.message));var r})).catch((function(e){console.log(e),n(T(e.message))}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},C=function(e){return{type:u.k,error:e}},A=function(e,t){return function(n){n({type:u.l});var r={headers:{"x-auth":e}};i.post("/createBooking",t,r).then((function(e){var t;"success"===e.data.status?n((t=e.data.message,{type:u.m,message:t})):n(C(e.data.message))})).catch((function(e){n(C(e.message))}))}},I=function(e){return{type:u.n,error:e}},k=function(e){return function(t){t({type:u.o});var n=JSON.parse(localStorage.getItem("data")),r={headers:{"x-auth":e}},a={type:n.type,user_id:n.user_id},o="";o=1===parseInt(a.type)?"owner_id=".concat(a.user_id):"customer_id=".concat(a.user_id),i.get("/getBooking?".concat(o),r).then((function(e){var n;"success"===e.data.status?t((n=e.data.data,{type:u.p,booking:n})):t(I(e.data.message))})).catch((function(e){t(I(e.message))}))}},w=function(){return function(e){e({type:u.r}),navigator.geolocation.getCurrentPosition((function(t){var n={latitude:t.coords.latitude,longitude:t.coords.longitude};i.get("https://reverse.geocoder.ls.hereapi.com/6.2/reversegeocode.json?prox=".concat(n.latitude,"%2C").concat(n.longitude,"%2C250&mode=retrieveAddresses&maxresults=1&gen=9&apiKey=M_ulbe3M9PhYpDH5tZD7Y9TLxjrzTH4J9c9eSWt_3hE")).then((function(t){var n;e((n=t.data.Response.View[0].Result[0].Location.Address,{type:u.s,location_data:n}))})).catch((function(t){var n;e((n=t.message,{type:u.q,error:n}))}))}))}}}},[[197,5,6]]]);
//# sourceMappingURL=main.49f6b3f4.chunk.js.map