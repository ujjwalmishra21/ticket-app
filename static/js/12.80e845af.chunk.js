(this["webpackJsonpticket-app"]=this["webpackJsonpticket-app"]||[]).push([[12],{330:function(e,t,a){"use strict";var n=a(0),o=a.n(n),r=a(326),s=a(605),i=a(365);t.a=function(){return o.a.createElement(r.a,null,o.a.createElement(s.a,{active:!0},o.a.createElement(i.a,{size:"medium"})))}},461:function(e,t,a){},604:function(e,t,a){"use strict";a.r(t);var n=a(35),o=a(36),r=a(38),s=a(37),i=a(0),l=a.n(i),c=a(46),u=a(68),p=a(586),m=a(330),d=a(97),h=a(381),f=a(607),g=a(600),k=a(603),E=a(520),_=a.n(E),v=a(427),y=(a(461),a(93)),b=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={showModal:!1,data:null,booking_date:null,slot_id:null},e.onShowModal=function(){e.setState({showModal:!0})},e.onCloseModal=function(){e.setState({showModal:!1})},e.onDateChange=function(t){e.setState({booking_date:t})},e.handleChange=function(t,a){e.setState(Object(d.a)({},t,a))},e.confirmSlotBook=function(t){t.preventDefault();var a={booking_date:e.state.booking_date,slot_id:e.state.slot_id.value,customer_id:e.props.userData.user_id,store_id:e.props.store_id};e.props.createBooking(e.props.token,a),e.resetModal(),e.onCloseModal()},e.resetModal=function(){e.setState({booking_date:null,slot_id:null})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=[];this.props.slots.forEach((function(a){a.start_time>=e.props.open_time&&a.end_time<=e.props.close_time&&t.push({value:a.slot_id,label:a.description})}));var a=l.a.createElement(p.a,null,l.a.createElement(p.a.Content,{className:"content"},l.a.createElement(h.a,{floated:"right",size:"mini",src:"https://img.icons8.com/wired/64/000000/online-store.png",className:"storeIcon"}),l.a.createElement(p.a.Header,null,this.props.name),l.a.createElement(p.a.Meta,null,l.a.createElement(f.a,{maxRating:5,rating:this.props.rating,icon:"star"})),l.a.createElement(p.a.Description,null,this.props.street,", ",this.props.locality,", ",this.props.city)),l.a.createElement(p.a.Content,{extra:!0},l.a.createElement("div",{style:{float:"left"}},"Time: ",l.a.createElement(p.a.Description,null,this.props.open_time," - ",this.props.close_time)),l.a.createElement("div",{style:{float:"right"}},l.a.createElement(g.a,{size:"mini",trigger:l.a.createElement(k.a,{primary:!0,onClick:this.onShowModal},"Book"),open:this.state.showModal,onClose:this.onCloseModal},l.a.createElement(g.a.Header,null,"Pick A Slot"),l.a.createElement(g.a.Content,null,l.a.createElement("div",{className:"datepicker-section"},l.a.createElement(_.a,{dateFormat:"dd/MM/yyyy",className:"datepicker",selected:this.state.booking_date,placeholderText:"Select a date",onChange:this.onDateChange})),l.a.createElement(v.a,{className:"select",value:this.state.slot_id,onChange:function(t){return e.handleChange("slot_id",t)},placeholder:"Select a time slot",options:t})),l.a.createElement(g.a.Actions,null,l.a.createElement(k.a,{negative:!0,onClick:this.onCloseModal},"Close"),l.a.createElement(k.a,{positive:!0,icon:"checkmark",labelPosition:"right",content:"Confirm",onClick:this.confirmSlotBook}))))));return l.a.createElement(u.a,null,a)}}]),a}(i.Component),C=Object(c.b)((function(e){return{userData:e.auth.data,token:e.auth.token}}),(function(e){return{createBooking:function(t,a){return e(y.e(t,a))}}}))(b),S=Object(c.b)((function(e){return{loadingBooking:e.booking.loading,message:e.booking.message,error:e.booking.error}}))((function(e){var t=[],a=[];e.stores.forEach((function(e){t.push(e)})),e.slots.forEach((function(e){a.push(e)}));var n=l.a.createElement(p.a.Group,{style:{justifyContent:"center",width:"100%"}},t.map((function(e){var t=e.landmark?e.landmark:"",n=e.rating?e.rating:2.5,o=e.open_time.split(":");o=o[0]+":"+o[1];var r=e.close_time.split(":");return r=r[0]+":"+r[1],l.a.createElement(C,{key:e.id,src:e.src,store_id:e.store_id,name:e.store_name,rating:n,street:e.street,locality:e.locality,landmark:t,city:e.city,state:e.state,zip:e.zip,country:e.country,owner_id:e.owner_id,open_time:o,close_time:r,slots:a})})));return e.loadingBooking&&(n=l.a.createElement(m.a,null)),e.message&&alert(e.message),e.error&&alert(e.error),l.a.createElement(u.a,null,n)})),M=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=[],t=JSON.parse(localStorage.getItem("data"));1===parseInt(t.type)?e.owner_id=t.user_id:2===parseInt(t.type)&&(e.city=this.props.locationData.City),this.props.fetchStores(this.props.token,e),this.props.fetchSlots(this.props.token)}},{key:"render",value:function(){var e=[],t=[];this.props.stores.forEach((function(t){e.push(t)})),this.props.slots.forEach((function(e){t.push(e)}));var a=l.a.createElement(S,{key:"stores",stores:e,slots:t});return(this.props.loading||this.props.locationLoad)&&(a=l.a.createElement(m.a,null)),l.a.createElement(u.a,null,l.a.createElement("h1",null,"Stores"),a)}}]),a}(i.Component);t.default=Object(c.b)((function(e){return{token:e.auth.token,stores:e.store.stores,loading:e.store.loading,slots:e.slot.slots,locationLoad:e.location.loading,locationData:e.location.location_data}}),(function(e){return{fetchStores:function(t,a){return e(y.i(t,a))},fetchSlots:function(t){return e(y.h(t))}}}))(M)}}]);
//# sourceMappingURL=12.80e845af.chunk.js.map